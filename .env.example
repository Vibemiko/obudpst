# =====================================================================
# OB-UDPST Web GUI Environment Configuration
# =====================================================================
# This file contains all configuration needed for local development,
# network testing, and Docker deployment scenarios.
# Copy this file to .env and update with your actual values.
# =====================================================================

# ---------------------------------------------------------------------
# SECTION 1: Supabase Configuration (REQUIRED)
# ---------------------------------------------------------------------
# These are required for database operations and authentication.
# Get these values from your Supabase project dashboard.

# Frontend Supabase Config (with VITE_ prefix for Vite.js)
VITE_SUPABASE_URL=your_supabase_url_here
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Backend Supabase Config (without VITE_ prefix)
SUPABASE_URL=your_supabase_url_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here

# ---------------------------------------------------------------------
# SECTION 2: Backend Server Configuration
# ---------------------------------------------------------------------
# HOST: The network interface the backend server binds to
#   - 0.0.0.0 = All interfaces (accessible from network) - RECOMMENDED
#   - localhost/127.0.0.1 = Local only (more secure, only accessible from same machine)
#   - Specific IP = Bind to specific interface
HOST=0.0.0.0

# PORT: The port the backend API listens on
PORT=3000

# NODE_ENV: Environment mode (development, production, test)
NODE_ENV=development

# ---------------------------------------------------------------------
# SECTION 3: Frontend Development Server Configuration
# ---------------------------------------------------------------------
# VITE_HOST: The network interface for Vite dev server
#   - 0.0.0.0 = Accessible from network (for testing on other devices)
#   - localhost = Local only
VITE_HOST=0.0.0.0

# VITE_PORT: The port for Vite dev server (default: 5173)
VITE_PORT=5173

# ---------------------------------------------------------------------
# SECTION 4: API URL Configuration
# ---------------------------------------------------------------------
# VITE_API_URL: The URL where the frontend should connect to the backend
#
# For LOCAL DEVELOPMENT (both running on same machine):
#   Leave commented out - will use proxy through Vite dev server
#   Vite will proxy /api requests to http://localhost:3000
#
# For NETWORK TESTING (accessing from other devices on LAN):
#   Set to: http://YOUR_SERVER_IP:3000
#   Example: VITE_API_URL=http://192.168.1.100:3000
#
# For DOCKER DEPLOYMENT:
#   Set to: http://backend:3000 (uses Docker service name)
#   Or use your host IP if accessing from outside Docker
#
# For PRODUCTION:
#   Set to your production API URL
#   Example: VITE_API_URL=https://api.yourdomain.com

# VITE_API_URL=http://localhost:3000

# ---------------------------------------------------------------------
# SECTION 5: Docker-Specific Configuration
# ---------------------------------------------------------------------
# These settings are used when running in Docker containers.
# The docker-compose.yml file will override some of these.

# DOCKER_BACKEND_HOST: Internal Docker host for backend
# (Used inside docker-compose for backend service)
DOCKER_BACKEND_HOST=0.0.0.0

# DOCKER_FRONTEND_API_URL: How frontend container connects to backend
# Uses Docker service name for container-to-container communication
DOCKER_FRONTEND_API_URL=http://backend:3000

# ---------------------------------------------------------------------
# SECTION 6: Multi-VM / Machine Identity Configuration
# ---------------------------------------------------------------------
# MACHINE_ID: A unique identifier for this specific machine/VM.
#
# When running this application on multiple VMs that share the same
# Supabase database, each VM must have a distinct MACHINE_ID so that
# server state is isolated per machine. Without this, starting a server
# on VM-A would incorrectly show as running on VM-B's GUI.
#
# RECOMMENDED: Leave this commented out. The backend will automatically
# use the system hostname (from os.hostname()) as the machine identifier.
# This works correctly as long as each VM has a unique hostname.
#
# Only set this manually if your VMs share the same hostname or you want
# a more descriptive label:
#   Example: MACHINE_ID=vm-server-01
#   Example: MACHINE_ID=proxmox-alpha
#
# MACHINE_ID=my-unique-vm-name

# ---------------------------------------------------------------------
# SECTION 7: UDPST Binary Configuration
# ---------------------------------------------------------------------
# Path to the UDPST binary executable
#
# RECOMMENDED: Leave this commented out to use automatic path detection.
# The backend will automatically find the binary in the project root.
#
# If you need to specify a custom path:
#   - Use ABSOLUTE paths for reliability: /opt/obudpst/udpst
#   - For Docker: /app/udpst (inside container)
#
# NOTE: Relative paths are resolved from the project root directory.
#
# UDPST_BINARY_PATH=/path/to/udpst

# ---------------------------------------------------------------------
# SECTION 7: Logging Configuration
# ---------------------------------------------------------------------
# LOG_DIR: Directory where log files will be written
#   - Default: /var/log/udpst
#   - Must be writable by the user running the backend
#   - Automatically created if it doesn't exist
#   - Logs rotate daily with 14-day retention (30 days for errors)
LOG_DIR=/var/log/udpst

# LOG_LEVEL: Minimum log level to record
#   - error: Only critical errors
#   - warn: Warnings and errors
#   - info: General application flow (recommended for production)
#   - debug: Detailed debugging information (use for troubleshooting)
LOG_LEVEL=info

# ---------------------------------------------------------------------
# DEPLOYMENT SCENARIO EXAMPLES:
# ---------------------------------------------------------------------
#
# SCENARIO A: Local Development (default)
# - Backend on localhost:3000
# - Frontend on localhost:5173
# - Use HOST=0.0.0.0 for network accessibility
# - Leave VITE_API_URL commented (uses Vite proxy)
#
# SCENARIO B: Network Testing (LAN/WAN access)
# - Backend on 0.0.0.0:3000
# - Frontend on 0.0.0.0:5173
# - Set VITE_API_URL=http://YOUR_IP:3000
# - Accessible from other devices on network
#
# SCENARIO C: Docker Containers
# - Use docker-compose.yml
# - Backend in container 'backend'
# - Frontend in container 'frontend'
# - Set VITE_API_URL=http://backend:3000 (for container-to-container)
# - Or use host IP for external access
#
# ---------------------------------------------------------------------
